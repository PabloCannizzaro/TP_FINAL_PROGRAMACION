async function initApp() {
  try {
    state = await api.get('/api/game/state');
    render();
  } catch (_) {
    await newGame();
  }
  // Siempre pedir el nombre al cargar/reiniciar pÃ¡gina
  safeSet('playerName', '');
  openNameModal();
}

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => initApp());
} else {
  initApp();
}


